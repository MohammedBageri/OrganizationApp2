import{n as l,a as o,A as s}from"./index.7c76922b.js";import"./lodash.10886621.js";const i={data:()=>({search:"",id:null,bondFile:[],paymentDialog:!1,headers:[{text:"\u0627\u0644\u0625\u0633\u0645",align:"center",sortable:!1,value:"organization.nameAr"},{text:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0624\u0633\u0633\u0629",align:"center",sortable:!1,value:"organization.type"},{text:"\u0645\u062D\u0644\u064A\u0629/\u062F\u0648\u0644\u064A\u0629",align:"center",sortable:!1,value:"organization.localOrInternational"},{text:"\u0627\u0644\u0625\u0642\u0644\u064A\u0645 \u0627\u0644\u062C\u063A\u0631\u0627\u0641\u064A",value:"organization.mapArea.name",sortable:!1},{text:"\u0645\u062D\u0644\u064A\u0629/\u062F\u0648\u0644\u064A\u0629",value:"organization.localOrInternational",sortable:!1},{text:"\u0647\u0627\u062A\u0641 \u0627\u0644\u0645\u0624\u0633\u0633\u0629",value:"organization.phone",sortable:!1},{text:"\u062D\u0627\u0644\u0629 \u0627\u0644\u0637\u0644\u0628",value:"status",sortable:!1},{text:"\u0631\u0641\u0639 \u0627\u0644\u0633\u0646\u062F\u0627\u062A",value:"actions",sortable:!1}],amount:"",bNumber:"",bDate:"",bNote:"",type:"newOrder"}),mounted(){this.newOrder()},methods:{openPayment(n){console.log(n),this.id=n._id,this.paymentDialog=!0},async uploadBond(n){const e=new FormData;e.append("bondAmount",this.amount),e.append("bondNumber",this.bNumber),e.append("bondDate",this.bDate),e.append("bondNote",this.bNote),e.append("bond",this.bondFile[0]);const t=this.id;await o.patch(`/api/Orders/order_completed/${t}`,e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{console.log("res",a)}).catch(a=>{console.log(a)}),this.$router.go()},uploadFile(){this.bondFile.push(event.target.files[0]),console.log(this.bondFile)},async newOrder(){this.type="newOrder",await this.$store.dispatch("order/getOrderBeforPayment",{type:""})},async reNewOrder(){this.type="reNewOrder",await this.$store.dispatch("order/getOrderBeforPayment",{type:"\u062A\u062C\u062F\u064A\u062F \u0627\u0644\u062A\u0631\u062E\u064A\u0635"})}}};var d=function(){var e=this,t=e._self._c;return t("v-row",[t("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[t("v-card",{attrs:{rounded:"xl"}},[t("v-card-title",[t("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"\u0628\u062D\u062B","single-line":"","full-width":"10px",reverse:""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}}),t("v-item-group",{model:{value:e.type,callback:function(a){e.type=a},expression:"type"}},[t("v-item",{attrs:{value:"newOrder"},scopedSlots:e._u([{key:"default",fn:function({active:a,toggle:r}){return[t("v-btn",{staticClass:"ml-2 white--text elevation-2",attrs:{color:a?"grey":"#14425a"},on:{click:e.newOrder}},[e._v("\u0637\u0644\u0628\u0627\u062A \u062C\u062F\u064A\u062F\u0629")])]}}])}),t("v-item",{attrs:{value:"reNewOrder"},scopedSlots:e._u([{key:"default",fn:function({active:a,toggle:r}){return[t("v-btn",{staticClass:"white--text elevation-2",attrs:{color:a?"grey":"#14425a"},on:{click:e.reNewOrder}},[e._v("\u0637\u0644\u0628\u0627\u062A \u062A\u062C\u062F\u064A\u062F")])]}}])})],1)],1),t("v-data-table",{staticClass:"elevation-1 rounded-br-xl roundes-bl-xl",attrs:{headers:e.headers,items:e.$store.state.order.orders,search:e.search},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(r){return e.openPayment(a)}}},[e._v(" mdi-credit-card-sync-outline ")])]}}],null,!0)}),t("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"600"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("v-card",[t("v-toolbar",{attrs:{color:"green",dark:"",dir:"rtl",flat:""}},[t("v-icon",{staticClass:"ml-2"},[e._v("mdi-credit-card-sync-outline")]),e._v(" \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0633\u0646\u062F ")],1),t("v-card-text",{attrs:{dir:"rtl"}},[t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"12",md:"12",sm:"12",lg:"12"}},[t("v-text-field",{staticClass:"mt-10 rounded-l-xl rounded-tr-xl rounded-br-0",attrs:{color:"#14425a",label:"\u0627\u0644\u0645\u0628\u0644\u063A",outlined:"",dense:"",reverse:""},model:{value:e.amount,callback:function(r){e.amount=r},expression:"amount"}}),t("v-text-field",{staticClass:"rounded-l-xl rounded-tr-xl rounded-br-0",attrs:{color:"#14425a",label:"\u0631\u0642\u0645 \u0627\u0644\u0633\u0646\u062F",outlined:"",dense:"",reverse:""},model:{value:e.bNumber,callback:function(r){e.bNumber=r},expression:"bNumber"}})],1)],1),t("v-text-field",{staticClass:"rounded-l-xl rounded-tr-xl rounded-br-0",attrs:{color:"#14425a",label:"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0633\u0646\u062F",outlined:"",type:"date",dense:"",reverse:""},model:{value:e.bDate,callback:function(r){e.bDate=r},expression:"bDate"}}),t("v-text-field",{staticClass:"rounded-l-xl rounded-tr-xl rounded-br-0",attrs:{color:"#14425a",label:"\u0627\u0644\u0628\u064A\u0627\u0646",outlined:"",dense:"",reverse:""},model:{value:e.bNote,callback:function(r){e.bNote=r},expression:"bNote"}}),t("v-file-input",{staticClass:"rounded-l-xl rounded-tr-xl rounded-br-0",attrs:{color:"#14425a",outlined:"",dense:""},on:{change:e.uploadFile}})],1),t("v-card-actions",{attrs:{dir:"rtl"}},[t("v-btn",{staticClass:"mb-5 mr-2",attrs:{outlined:"",color:"green"},on:{click:e.uploadBond}},[e._v("\u0631\u0641\u0639")]),t("v-btn",{staticClass:"mb-5 mr-2",attrs:{outlined:"",color:"red"},on:{click:function(r){a.value=!1}}},[e._v("\u0625\u063A\u0644\u0627\u0642")])],1)],1)]}}]),model:{value:e.paymentDialog,callback:function(a){e.paymentDialog=a},expression:"paymentDialog"}})],1)],1)],1)},c=[],u=l(i,d,c,!1,null,"af84ae4a",null,null);const m=u.exports,v={components:{AppLayout:s,PrymentTable:m}};var p=function(){var e=this,t=e._self._c;return t("AppLayout",[t("v-container",{staticClass:"mt-16",staticStyle:{height:"100%"}},[t("v-row",{staticClass:"content-row",staticStyle:{height:"100%"}},[t("v-card",{staticClass:"mt-16 rounded-br-xl rounded-bl-xl",staticStyle:{"z-index":"1"},attrs:{rounded:"lg",width:"900px",dir:"rtl"}},[t("PrymentTable")],1)],1)],1)],1)},b=[],f=l(v,p,b,!1,null,null,null,null);const h=f.exports;export{h as default};
